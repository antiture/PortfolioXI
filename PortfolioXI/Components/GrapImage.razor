@inject IJSRuntime JS

<div id="scrollableDiv" class="visioner my-grab-area">
    @ChildContent

    <button class="btn btn-primary btn-resize-image @ImageClass" @onclick="ToggleEnable">
        @((isImageToggleEnabled ? "🔒 锁定状态" : "🔓 解锁点击"))
    </button>
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }

    public string ImageClass => isImageActive ? "img-active" : "img-normal";

    public void ToggleImage()
    {
        if (!isImageToggleEnabled) return;
        isImageActive = !isImageActive;
        isImageToggleEnabled = false;
    }

    private void ToggleEnable()
    {
        isImageToggleEnabled = true;
        isImageActive = false;
    }

    private bool isImageActive = false;
    private bool isImageToggleEnabled = true;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("enableGrabScroll", "scrollableDiv");
        }
    }
}
